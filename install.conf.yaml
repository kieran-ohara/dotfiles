- defaults:
    link:
      relink: true

- clean: ['~']

- create:
  - ~/.config

- link:
    ~/.aws: config/aws
    ~/.config/alacritty: config/alacritty
    ~/.config/docker: config/docker
    ~/.config/git: config/git
    ~/.config/homebrew: config/homebrew
    ~/.config/httpie: config/httpie
    ~/.config/karabiner: config/karabiner
    ~/.config/mycli: config/mycli
    ~/.config/nvim: config/nvim
    ~/.config/skhd: config/skhd
    ~/.config/tmux: config/tmux
    ~/.config/vim: config/vim
    ~/.config/zsh: config/zsh
    ~/.vimrc: config/vim/vimrc
    ~/.zshenv: config/zsh/.zshenv
    ~/Library/LaunchAgents/me.kieranbamforth.on-login.plist: os/me.kieranbamforth.on-login.plist

- create:
  - ~/.cache/vim/backupfiles
  - ~/.cache/vim/swapfiles
  - ~/.cache/vim/undodir
  - ~/.cache/nvim/backupfiles
  - ~/.cache/nvim/swapfiles
  - ~/.cache/nvim/undodir

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  - [make dependencies/node_modules]
  - [make dependencies/venv/bin]
  - [cd config/nvim/parser && ./build-parsers.sh]
  - [launchctl load ~/Library/LaunchAgents/me.kieranbamforth.on-login.plist]
