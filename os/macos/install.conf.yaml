---
- defaults:
    link:
      relink: true

- clean: ['~']

- create:
    - ~/Library/LaunchAgents
    - ~/.local/share/ollama

- link:
    ~/.config/karabiner: config/karabiner
    ~/.config/skhd: config/skhd
    ~/Library/LaunchAgents/me.kieranbamforth.on-login.plist: os/macos/me.kieranbamforth.on-login.plist

- shell:
    - [make dependencies/brew]
    - [/opt/homebrew/bin/mise install]
    - [cd config/nvim/parser-src && ./build-parsers.sh]
    - [launchctl load ~/Library/LaunchAgents/me.kieranbamforth.on-login.plist]
    - [./os/macos/preferences.sh]
